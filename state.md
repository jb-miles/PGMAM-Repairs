meta:
  current_goal: "Catalog and fix errors across gay adult film agents"
  run_id: ""
  issue_id: ""
  bundle_path: ""
  current_phase: "implementation"
  current_report: "repairs/information/error-catalog.md"
  last_log_scan: "repairs/progress/consolidated_plex_logs_20260206_213635.txt"
  last_decision: "Patch shared parser/indexing defects across all bundles from latest live-log triage"
  last_action: "Ran live aggregator and applied shared utils hardening across 21 bundles + _PGMA source"
  last_code_change: "*/Contents/Code/utils.py + _PGMA/Scripts/utils.py (collections parser, synopsis/release-date extraction, release-date metadata guard)"
  last_updated: "2026-02-06"
  next_steps: "Deploy updated bundles to Plex plugin directory, restart plugins, refresh metadata, then re-run aggregator"
  stop_condition: "user confirms error counts are reduced or switches tasks"
  notes: "Latest run uses live logs from /Users/jbmiles/Library/Logs/Plex Media Server/PMS Plugin Logs. Fresh report: repairs/progress/consolidated_plex_logs_20260206_213635.txt. New patch set addresses recurring list-index/date-update failures."

checklist:
  - item: "Collect logs (7-day window)"
    status: "done"
  - item: "Create project-level error catalog"
    status: "done"
  - item: "Create bundle error reports (AEBN, GEVI, GAF, NFO)"
    status: "done"
  - item: "Investigate GayAdultFilms model corruption"
    status: "done â€” self-healing, no code fix needed"
  - item: "Deploy AEBN title match fix"
    status: "done"
  - item: "Fix and deploy GEVI date parsing bug"
    status: "done"
  - item: "Propagate title substring fallback to GayHotMovies, GayFetishandBDSM, GayMovie, GayRado"
    status: "done"
  - item: "Fix AEBN studio match (soft warning instead of hard skip)"
    status: "done"
  - item: "Deploy all fixes to Plex plugins directory"
    status: "done"
  - item: "Restart Plex and validate error reduction"
    status: "todo"
  - item: "Run live log aggregation and apply shared parser hardening"
    status: "done"

decisions:
  - date: "2026-02-05"
    decision: "Scope: catalog errors for all gay adult agents"
    rationale: "User requested comprehensive error cataloging"
  - date: "2026-02-05"
    decision: "GayAdultFilms model errors are self-healing, deprioritized"
    rationale: "Contributing agents create models on successful write; fixing AEBN/GEVI will cascade"
  - date: "2026-02-05"
    decision: "Fix GEVI date parsing bug (item vs items variable)"
    rationale: "All 3 date range branches used wrong variable and wrong slice lengths"
  - date: "2026-02-05"
    decision: "Make AEBN studio mismatch a soft warning (score=86) instead of hard skip"
    rationale: "221 errors from production vs distribution studio name mismatches; title+date+duration still valid"

reports:
  - name: "error-catalog.md"
    path: "repairs/information/error-catalog.md"
    status: "done"
  - name: "AEBN error catalog"
    path: "AEBN.bundle/Contents/repairs/202602051531-error-catalog.md"
    status: "done"
  - name: "GEVI error catalog"
    path: "GEVI.bundle/Contents/repairs/202602051531-error-catalog.md"
    status: "done"
  - name: "GayAdultFilms error catalog"
    path: "GayAdultFilms.bundle/Contents/repairs/202602051531-error-catalog.md"
    status: "done"
  - name: "NFOImporter error catalog"
    path: "NFOImporter.bundle/Contents/repairs/202602051531-error-catalog.md"
    status: "done"

blockers:
  - "Plex plugin restart needed for all new fixes to take effect"

handoff:
  summary: "All fixes deployed to Plex. AEBN studio match softened (score=86 fallback). Title substring fallback in AEBN + 4 agents. GEVI date parsing fixed. Need restart + scan to validate."
  next_actions:
    - "Restart Plex plugins (or restart PMS)"
    - "Trigger a metadata refresh on a few items to exercise the fixes"
    - "Wait ~24h then re-run log analysis to compare error counts"
